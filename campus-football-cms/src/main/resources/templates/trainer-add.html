<!--_meta 作为公共模版分离出去-->
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8"/>
<meta name="renderer" content="webkit|ie-comp|ie-stand"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<link rel="Bookmark" href="favicon.ico" />
<link rel="Shortcut Icon" href="favicon.ico" />
<!--[if lt IE 9]>
<script type="text/javascript" src="/static/lib/html5shiv.js"></script>
<script type="text/javascript" src="/static/lib/respond.min.js"></script>
<![endif]-->
<link rel="stylesheet" type="text/css" href="/static/h-ui/css/H-ui.min.css" />
<link rel="stylesheet" type="text/css" href="/static/h-ui.admin/css/H-ui.admin.css" />
<link rel="stylesheet" type="text/css" href="/static/lib/Hui-iconfont/1.0.8/iconfont.css" />
<link rel="stylesheet" type="text/css" href="/static/h-ui.admin/skin/default/skin.css" id="skin" />
<link rel="stylesheet" type="text/css" href="/static/h-ui.admin/css/style.css" />
<!--[if IE 6]>
<script type="text/javascript" src="/static/lib/DD_belatedPNG_0.0.8a-min.js" ></script>
<script>DD_belatedPNG.fix('*');</script>
<![endif]-->
<!--/meta 作为公共模版分离出去-->

<title>添加用户 - H-ui.admin v3.1</title>
</head>
<body>
<article class="page-container">
	<form action="" method="post" class="form form-horizontal" id="form-member-add">
		<div class="row cl" style="margin-left: 80px">
			<span class="c-red">*</span>真实姓名：<input type="text" class="input-text" value="" maxlength="20" style="width:200px" placeholder="" id="username" name="username"/>
			<label style="margin-left: 40px">邮&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;箱：</label><input type="text" class="input-text" value="" style="width:200px" placeholder="" id="mailbox" name="mailbox"/>
		</div>
		<div class="row cl" style="margin-left: 80px">
			<span class="c-red">*</span>身份证号：<input type="text" class="input-text" value="" minlength="8" maxlength="18" style="width:200px" placeholder="" id="idCard" name="idCard"/>
			<label style="margin-left: 40px">毕业院校：</label><input type="text" class="input-text" value="" style="width:200px" placeholder="" id="graduate" name="graduate"/>
		</div>
		<div class="row cl" style="margin-left: 80px">
			&nbsp;工作单位：<input type="text" class="input-text" value="" style="width:200px" placeholder="" id="workUnit" name="workUnit"/>
			<label style="margin-left: 40px">从业时间：</label>
			<input type="number" class="input-text" value="" style="width:200px" placeholder="" id="jobYear" name="jobYear"/>
			<!--<select class="select" id="jobYear" style="width:200px;height: 30px">-->
				<!--<option value="" onclick="">请选择</option>-->
				<!--<option value="1">1</option>-->
				<!--<option value="2">2</option>-->
				<!--<option value="3">3</option>-->
				<!--<option value="4">4</option>-->
				<!--<option value="5">5</option>-->
				<!--<option value="10">10</option>-->
				<!--<option value="15">15</option>-->
			<!--</select>-->
		</div>
		<div class="row cl" style="margin-left: 80px">
			&nbsp;性&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;别：
			<select class="select" id="gender" style="width:200px;height: 30px">
				<option value="1" onclick="">男</option>
				<option value="2">女</option>
			</select>
			<label style="margin-left: 40px">所教年级：</label>
			<select class="select" id="grade" style="width:200px;height: 30px">
				<option value="" onclick="">请选择</option>
				<option value="1">幼儿园</option>
				<option value="2">小学</option>
				<option value="3">初中</option>
				<option value="4">高中</option>
			</select>
		</div>
		<div class="row cl" style="margin-left: 80px">
			<span class="c-red">*</span>教师证号：<input type="text" class="input-text" maxlength="17" value="" style="width:200px" placeholder="" id="teachNum" name="teachNum"/>
			<label style="margin-left: 40px">本学期每周教学学时：</label>
			<select class="select" id="weekHour" style="width:130px;height: 30px">
				<option value="" onclick="">请选择</option>
				<option value="1">1</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5</option>
				<option value="6">更多</option>
			</select>
		</div>
		<div class="row cl" style="margin-left: 80px">
			<span class="c-red">*</span>手机号码：<input type="text" class="input-text" maxlength="11" style="width:200px" placeholder="" id="phone" name="phone"/>
			<label style="margin-left: 40px">密&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;码：</label><input type="password" class="input-text" style="width:200px" placeholder="" id="password" name="password"/>
		</div>
		<div class="row cl">
			<div class="col-xs-8 col-sm-9 col-xs-offset-4 col-sm-offset-3">
				<input class="btn btn-primary radius" type="submit" onclick="" value="&nbsp;&nbsp;提交&nbsp;&nbsp;"/>
				<button onClick="resetSure();" style="margin-left: 20px" class="btn btn-default radius" type="button">&nbsp;&nbsp;取消&nbsp;&nbsp;</button>
			</div>
		</div>
	</form>
</article>

<!--_footer 作为公共模版分离出去-->
<script type="text/javascript" src="/static/lib/jquery/jquery.min.js"></script>
<script type="text/javascript" src="/static/lib/layer/2.4/layer.js"></script>
<script type="text/javascript" src="/static/h-ui/js/H-ui.min.js"></script>
<script type="text/javascript" src="/static/h-ui.admin/js/H-ui.admin.js"></script> <!--/_footer 作为公共模版分离出去-->

<!--请在下方写此页面业务相关的脚本--> 
<script type="text/javascript" src="/static/lib/My97DatePicker/4.8/WdatePicker.js"></script>
<script type="text/javascript" src="/static/lib/jquery.validation/1.14.0/jquery.validate.js"></script>
<script type="text/javascript" src="/static/lib/jquery.validation/1.14.0/validate-methods.js"></script>
<script type="text/javascript" src="/static/lib/jquery.validation/1.14.0/messages_zh.js"></script>
<script type="text/javascript">
$(function(){
	$('.skin-minimal input').iCheck({
		checkboxClass: 'icheckbox-blue',
		radioClass: 'iradio-blue',
		increaseArea: '20%'
	});
	
	$("#form-member-add").validate({
		rules:{
			username:{
				required:true,
				minlength:1,
				maxlength:20
			},
			gender:{
				required:true,
			},
			phone:{
				required:true,
				isMobile:true,
			},
			idCard:{
				required:true,
                isIdCardNo:true
			},
            teachNum:{
				required:true
			}
		},
		onkeyup:false,
		focusCleanup:true,
		success:"valid",
		submitHandler:function(form){
//			$(form).ajaxSubmit();
            addTrainer();
			var index = parent.layer.getFrameIndex(window.name);
			parent.$('.btn-refresh').click();
			parent.layer.close(index);
		}
	});
});

function resetSure(){
    layer.confirm('确定放弃添加？',function(index){
        layer_close();
    });
}

function addTrainer(){
    var url = "/manageApi/trainer/addTrainer";
    var trainerName = $('#username').val();
    var mailbox = $('#mailbox').val();
    var idCard = $('#idCard').val();
    var graduateSchool = $('#graduate').val();
    var workUnit = $('#workUnit').val();
    var jobYear = $('#jobYear').val();
    var gender = $('#gender').val();
    var gradeId = $('#grade').val();
    var teacherCertificateNum = $('#teachNum').val();
    var weekHour = $('#weekHour').val();
    var phone = $('#phone').val();
    var password = $('#password').val();
    $.ajax({
        type: "post",
        url: url,
        contentType: "application/json",
        async:false,
        data: JSON.stringify({
            trainerName:trainerName,
            mailbox:mailbox,
            idCard:idCard,
            graduateSchool:graduateSchool,
            workUnit:workUnit,
            jobYear:jobYear,
            gender:gender,
            gradeId:gradeId,
            teacherCertificateNum:teacherCertificateNum,
            weekHour:weekHour,
            password:password,
            phone:phone
        }),
        dataType: "json",
        success: function (data) {
            var ret = data.success;
            if(ret){
                alert(data.result);
                parent.window.location.reload();
            }else{
                alert(data.result);
			}
        },
        error: function(data) {
            console.log(data);
            alert("异常");
        }
    })
}
</script> 
<!--/请在上方写此页面业务相关的脚本-->
</body>
</html>